@using SchoolCloudMVC.BO
@model BackendBO
@{
    ViewBag.Title = "Direcciones";
    Layout = "~/Views/Shared/MasterPageBE.cshtml";
}

<div class="right_col" role="main">
    <div class="">
        <div class="page-title">
            <div class="title_left">
                <h3><span class="fa fa-map-marker"></span> Ubicaciones / Direcciones</h3>
            </div>
            <div class="title_right">
                <div class="col-md-5 col-sm-5 col-xs-12 form-group pull-right top_search">

                </div>
            </div>
        </div>
        <div class="clearfix"></div>
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Datos de ubicaciones Escolares<small>SchoolCloud</small></h2>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <div class="col-md-1 col-sm-1 col-xs-12 profile_left">
                          


                            </div>
                        <div class="col-md-10 col-sm-10 col-xs-12 profile_left">
                            <div class="profile_title form-group">
                                <div class="col-md-6">
                                    <h2>Administrar las Direcciones de las Universidades</h2>
                                </div>
                                <div class="col-md-3">
                                </div>
                                <div class="col-md-3">
                                    <input type="submit" id="AgregarDireccion" class="btn btn-success" value="Buscar Universidades" data-toggle="modal" data-target="#myModal" />
                                </div>

                            </div>
                            @Html.HiddenFor(x=>x.IDdireccion)
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                Nombre de la Escuela<span class="required"></span>
                            </label>
                            <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                <input class="form-control col-md-7 col-xs-12" id="NombreEscuela" disabled  />
                                </div>
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Pais <span class="required"></span>
                                </label>
                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    <div id="Pais">

                                    </div>
                                </div>
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Estado <span class="required"></span>
                                </label>
                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    <div id="Estados">

                                    </div>
                                </div>
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                Sucursal (opcional) <span class="required"></span>
                            </label>
                            <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                @Html.TextBoxFor(x => x.Lugar, new { @class = "form-control col-md-7 col-xs-12", @placeholder = "En caso de que la universidad tenga otro campus o division externa" })
                            </div>
                         
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Ciudad o Municipio <span class="required"></span>
                                </label>
                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    <div id="Ciudad">

                                    </div>
                                </div>
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Dirección <span class="required"></span>
                                </label>
                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    @Html.TextBoxFor(x => x.Direccion, new { @class = "form-control col-md-7 col-xs-12", @required = "required" })
                                </div>
                                <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                    Especificar la Ubicación<span class="required"></span>
                                </label>
                         
                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    <input type="text" class="form-control col-md-7 col-xs-12" id="ubicacion" required="required" text="Mérida Yucatán" />
                                </div>
                            <input class="btn btn-primary" value="Guardar" type="button" id="saves" />
                                <div class="form-group ">
                                    <div id="TablaMapa" style="width:100%;height:300px;" class="col-md-12 col-sm-12 col-xs-12">
                                    </div>
                                </div>

                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    @Html.HiddenFor(x => x.Latituf, new { @class = "form-control col-md-7 col-xs-12", @required = "required" })
                                </div>

                                <div class="form-group col-md-9 col-sm-9 col-xs-12">
                                    @Html.HiddenFor(x => x.Longitud, new { @class = "form-control col-md-7 col-xs-12", @required = "required" })
                                </div>
                            </div>
                        <div class="col-md-1 col-sm-1 col-xs-12 profile_left">
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg ">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"><i class="fa fa-search"></i> Buscar Universidades</h4>
            </div>
            <div class="modal-body">



                <div id="datatable_filter" class="dataTables_filter">
                    <label>
                        Buscar:
                        <input type="search" id="system-search" class="form-control input-sm" placeholder="Buscar" aria-controls="datatable">
                    </label>
                </div>
                <div id="TablaUniversidades">

                </div>


            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<script>
    (function () {//Función anónima autoejecutable
        $("#TablaUniversidades").load('/VistasParciales/_TablaDirecciones');
        $("#Pais").load('/VistasParciales/_ListaPaises');
        $("#Estados").load('/VistasParciales/_ListaEstados');
        $("#Ciudad").load('/VistasParciales/_ListaCiudad');
        $('#Latituf').val(21.0307721);
        $('#Longitud').val(-89.64634519999998)
    }());

 
</script>
<script type="text/javascript">
    function jsFunction(value) {
       
        $("#Estados").load('/VistasParciales/_ListaEstados/' + value);
        $("#Ciudad").load('/VistasParciales/_ListaCiudad');
        if (value == 'Seleccionar un pais') {
            $("#Estados").load('/VistasParciales/_ListaEstados');

        }
    }
    function jsFunctiona(value) {
       
      
            $("#Ciudad").load('/VistasParciales/_ListaCiudad/' + value);
        
    
    }
    //$(function () {

    //    $("#Pais").change(function () {
    //        alert(this.value);
    //    });
    //});
</script>
<script>
    $('#TablaMapa').locationpicker({
            radius: 0,
            location: {
                latitude: $('#Latituf').val(),
                longitude: $('#Longitud').val(),
            },
            inputBinding: {
                latitudeInput: $('#Latituf'),
                longitudeInput: $('#Longitud'),
                locationNameInput: $('#ubicacion')


            },
            enableAutocomplete:true

        })


</script>